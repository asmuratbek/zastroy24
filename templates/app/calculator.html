{% extends 'base.html' %}

{% load staticfiles widget_tweaks %}

{% block title %}Калькулятор{% endblock %}

{% block content %}
    <div class="uk-container uk-container-large uk-margin-medium-top">
        <ul class="uk-breadcrumb uk-flex-middle uk-flex">
            <li><a href="{% url 'client_app:index' %}"><span uk-icon="icon: home"></span></a></li>
            <li><span>Калькулятор расходов</span></li>
        </ul>
    </div>
    <section class="calculator uk-margin-medium-top">
        <div class="uk-container uk-container-large">
            <h1 class="title_border-left">калькулятор расходов</h1>
            <div class=" uk-box-shadow-hover-xlarge uk-padding uk-card-default">
                <ul class="uk-grid uk-grid-match uk-margin-remove uk-text-center uk-padding-remove uk-grid-collapse  uk-child-width-1-5@l uk-child-1-1@s uk-subnav uk-subnav-pill"
                    uk-grid uk-switcher="animation: uk-animation-fade">
                    <li><a href="#"><img src="{% static 'img/png/c1.png' %}" alt="">
                        <p>Сухие смеси</p></a></li>
                    <li><a href="#"><img src="{% static 'img/png/c2.png' %}" alt="">
                        <p>Материалы для
                            потолка из
                            гипсокартона</p></a></li>
                    <li><a href="#"><img src="{% static 'img/png/c3.png' %}" alt="">
                        <p>Материал
                            для облицовки
                            стены гипсокартоном</p></a></li>
                    <li><a href="#"><img src="{% static 'img/png/c4.png' %}" alt="">
                        <p>Материал для
                            перегородки
                            из гипсокартоны</p></a></li>
                    <li><a href="#"><img src="{% static 'img/png/c5.png' %}" alt="">
                        <p>Сухой тяжки</p></a></li>

                </ul>

                <ul class="uk-switcher uk-margin">
                    <li>
                        <h3>Расход сухой смеси</h3>
                        <form action="{% url 'products:calculation' %}" method="post" id="calculationForm"
                              data-products-url="{% url 'products:ajax_load_products' %}">{% csrf_token %}
                            <fieldset class="uk-fieldset">
                                <div class="uk-grid uk-child-width-1-2@m" uk-grid>
                                    <div class="">
                                        <label>Тип материала:</label>
                                        {% render_field calculation_form.category class='uk-select' %}
                                    </div>
                                    <div class="">
                                        <label>Продукт:</label>
                                        {% render_field calculation_form.product class='uk-select' %}
                                    </div>
                                    <div class="">
                                        <label for="">Площадь поверхности (м2)</label>
                                        {% render_field calculation_form.area class='uk-input' %}
                                    </div>
                                    <div class="">
                                        <label for="">Толщина слоя (мм)</label>
                                        {% render_field calculation_form.thickness class='uk-input' %}
                                    </div>
                                </div>
                            </fieldset>
                            <div class="uk-margin-medium-top">
                                <button class="uk-button uk-button-default blue-button">Рассчитать</button>
                            </div>
                        </form>
                        <section class="basket-page uk-margin-medium-top">
                            <div class="uk-container uk-container-large">
                                <div class="uk-grid uk-grid-large" uk-grid>
                                    <div class="uk-width-1-1">
                                        <div class=" uk-box-shadow-hover-xlarge uk-padding-remove uk-card-default">
                                            <div class="uk-overflow-auto">
                                                <table class="uk-margin-remove uk-table uk-table-hover uk-table-middle uk-table-divider">
                                                    <thead>
                                                    <tr>
                                                        <th class="uk-width-small">Наименование</th>
                                                        <th class="uk-table-expand"></th>
                                                        <th class="uk-width-medium">Цена</th>
                                                        <th class="uk-width-medium">Количество</th>
                                                        <th class="uk-width-small">Итого</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr>
                                                        <td class="uk-text-center"><img
                                                                class="uk-preserve-width uk-border-circle"
                                                                src="{% static 'img/png/basket.png' %}" width="40"
                                                                alt=""></td>
                                                        <td class="uk-table-link">
                                                            <a class="" href="">
                                                                <div class="uk-display-inline-block uk-label">Артикул:
                                                                    <span>107424</span></div>
                                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing
                                                                    elit, sed do eiusmod tempor.</p>
                                                            </a>
                                                        </td>
                                                        <td class="uk-text-truncate">345,35 сом</td>
                                                        <td class="uk-text-nowrap">
                                                            <form class="decrease_increase">
                                                                <fieldset class="uk-margin-remove">
                                                                    <div class="uk-border uk-float-left">
                                                                        <input type="button" value="-"
                                                                               class="decrease"/>
                                                                        <input type="text" class="increase_decrease"
                                                                               value="0"/>
                                                                        <input type="button" value="+"
                                                                               class="increase"/>
                                                                    </div>
                                                                </fieldset>
                                                            </form>
                                                        </td>
                                                        <td class="uk-text-nowrap">345,35 сом копия</td>
                                                        <td class="uk-text-nowrap"><a href="" uk-icon="icon: close"></a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="uk-text-center"><img
                                                                class="uk-preserve-width uk-border-circle"
                                                                src="{% static 'img/png/bg-tab.png' %}" width="40"
                                                                alt=""></td>
                                                        <td class="uk-table-link">
                                                            <a class="" href="">
                                                                <div class="uk-display-inline-block uk-label">Артикул:
                                                                    <span>107424</span></div>
                                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing
                                                                    elit, sed do eiusmod tempor.</p>
                                                            </a>
                                                        </td>
                                                        <td class="uk-text-truncate">345,35 сом</td>
                                                        <td class="uk-text-nowrap">
                                                            <form class="decrease_increase">
                                                                <fieldset class="uk-margin-remove">
                                                                    <div class="uk-border uk-float-left">
                                                                        <input type="button" value="-"
                                                                               class="decrease"/>
                                                                        <input type="text" class="increase_decrease"
                                                                               value="0"/>
                                                                        <input type="button" value="+"
                                                                               class="increase"/>
                                                                    </div>
                                                                </fieldset>
                                                            </form>
                                                        </td>
                                                        <td class="uk-text-nowrap">345,35 сом копия</td>
                                                        <td class="uk-text-nowrap"><a href="" uk-icon="icon: close"></a>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                <div class="total-product">
                                                    <div class="uk-grid uk-flex-middle uk-child-width-1-3@m uk-grid-collapse uk-text-center"
                                                         uk-grid>
                                                        <div class="left">
                                                            <span class="uk-margin-medium-right uk-display-inline-block"><i
                                                                    class="fa fa-cube uk-margin-small-right"
                                                                    aria-hidden="true"></i>Вес: 4 кг</span>
                                                            <span class=""><span class="uk-margin-small-right"
                                                                                 uk-icon="icon: cart"></span>Товаров: 4</span>
                                                        </div>
                                                        <div class="middle">
                                                            <span><i class="fa fa-money uk-margin-small-right"
                                                                     aria-hidden="true"></i> Итого: <b>1.240 сом</b></span>
                                                        </div>
                                                        <div class="right">
                                                            <a href="" class="uk-button uk-button-default">Оформить
                                                                заказ</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </li>
                    <li>
                        <h3>Расход материала для потолка из гипсокартона</h3>
                        <form>
                            <fieldset class="uk-fieldset">
                                <div class="uk-grid uk-child-width-1-2@m" uk-grid>
                                    <div class="">
                                        <label>Тип материала:
                                            <select class="uk-select">
                                                <option value>Любой</option>
                                                {% for cat in second_categories %}
                                                    <option value="{{ cat.id }}">{{ cat.title }}</option>
                                                {% endfor %}
                                            </select>
                                        </label>
                                    </div>
                                    <div class="">
                                        <label>Продукт:
                                            <select class="uk-select">
                                                <option value>Любой</option>
                                                {% for p in second_products %}
                                                    <option value="{{ p.id }}">{{ p.title }}</option>
                                                {% endfor %}
                                            </select>
                                        </label>
                                    </div>

                                    <div class="">
                                        <label for="">Площадь поверхности (м2)</label>
                                        <input class="uk-input" type="text" placeholder="14">
                                    </div>
                                    {#                                <div class="">#}
                                    {#                                    <label for="">Толщина слоя (мм)</label>#}
                                    {#                                    <input class="uk-input" type="text" placeholder="14">#}
                                    {#                                </div>#}
                                </div>
                            </fieldset>
                            <div class="uk-margin-medium-top">
                                <button class="uk-button uk-button-default blue-button">Рассчитать</button>
                            </div>
                        </form>
                        <section class="basket-page uk-margin-medium-top">
                            <div class="uk-container uk-container-large">
                                <div class="uk-grid uk-grid-large" uk-grid>
                                    <div class="uk-width-1-1">
                                        <div class=" uk-box-shadow-hover-xlarge uk-padding-remove uk-card-default">
                                            <div class="uk-overflow-auto">
                                                <table class="uk-margin-remove uk-table uk-table-hover uk-table-middle uk-table-divider">
                                                    <thead>
                                                    <tr>
                                                        <th class="uk-width-small">Наименование</th>
                                                        <th class="uk-table-expand"></th>
                                                        <th class="uk-width-medium">Цена</th>
                                                        <th class="uk-width-medium">Количество</th>
                                                        <th class="uk-width-small">Итого</th>
                                                    </tr>
                                                    </thead>
                                                    <tbody>
                                                    <tr>
                                                        <td class="uk-text-center"><img
                                                                class="uk-preserve-width uk-border-circle"
                                                                src="{% static 'img/png/basket.png' %}" width="40"
                                                                alt=""></td>
                                                        <td class="uk-table-link">
                                                            <a class="" href="">
                                                                <div class="uk-display-inline-block uk-label">Артикул:
                                                                    <span>107424</span></div>
                                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing
                                                                    elit, sed do eiusmod tempor.</p>
                                                            </a>
                                                        </td>
                                                        <td class="uk-text-truncate">345,35 сом</td>
                                                        <td class="uk-text-nowrap">
                                                            <form class="decrease_increase">
                                                                <fieldset class="uk-margin-remove">
                                                                    <div class="uk-border uk-float-left">
                                                                        <input type="button" value="-"
                                                                               class="decrease"/>
                                                                        <input type="text" class="increase_decrease"
                                                                               value="0"/>
                                                                        <input type="button" value="+"
                                                                               class="increase"/>
                                                                    </div>
                                                                </fieldset>
                                                            </form>
                                                        </td>
                                                        <td class="uk-text-nowrap">345,35 сом копия</td>
                                                        <td class="uk-text-nowrap"><a href="" uk-icon="icon: close"></a>
                                                        </td>
                                                    </tr>
                                                    <tr>
                                                        <td class="uk-text-center"><img
                                                                class="uk-preserve-width uk-border-circle"
                                                                src="{% static 'img/png/bg-tab.png' %}" width="40"
                                                                alt=""></td>
                                                        <td class="uk-table-link">
                                                            <a class="" href="">
                                                                <div class="uk-display-inline-block uk-label">Артикул:
                                                                    <span>107424</span></div>
                                                                <p>Lorem ipsum dolor sit amet, consectetur adipiscing
                                                                    elit, sed do eiusmod tempor.</p>
                                                            </a>
                                                        </td>
                                                        <td class="uk-text-truncate">345,35 сом</td>
                                                        <td class="uk-text-nowrap">
                                                            <form class="decrease_increase">
                                                                <fieldset class="uk-margin-remove">
                                                                    <div class="uk-border uk-float-left">
                                                                        <input type="button" value="-"
                                                                               class="decrease"/>
                                                                        <input type="text" class="increase_decrease"
                                                                               value="0"/>
                                                                        <input type="button" value="+"
                                                                               class="increase"/>
                                                                    </div>
                                                                </fieldset>
                                                            </form>
                                                        </td>
                                                        <td class="uk-text-nowrap">345,35 сом копия</td>
                                                        <td class="uk-text-nowrap"><a href="" uk-icon="icon: close"></a>
                                                        </td>
                                                    </tr>
                                                    </tbody>
                                                </table>
                                                <div class="total-product">
                                                    <div class="uk-grid uk-flex-middle uk-child-width-1-3@m uk-grid-collapse uk-text-center"
                                                         uk-grid>
                                                        <div class="left">
                                                            <span class="uk-margin-medium-right uk-display-inline-block"><i
                                                                    class="fa fa-cube uk-margin-small-right"
                                                                    aria-hidden="true"></i>Вес: 4 кг</span>
                                                            <span class=""><span class="uk-margin-small-right"
                                                                                 uk-icon="icon: cart"></span>Товаров: 4</span>
                                                        </div>
                                                        <div class="middle">
                                                            <span><i class="fa fa-money uk-margin-small-right"
                                                                     aria-hidden="true"></i> Итого: <b>1.240 сом</b></span>
                                                        </div>
                                                        <div class="right">
                                                            <a href="" class="uk-button uk-button-default">Оформить
                                                                заказ</a>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </section>
                    </li>
                    <li>Bazinga!</li>
                </ul>
            </div>
        </div>
    </section>
{% endblock %}
{% block javascripts %}
    <script src="https://code.jquery.com/jquery-3.3.1.min.js"></script>
    <script>
        $("#id_category").change(function () {
            var url = $("#calculationForm").attr("data-products-url");  // get the url of the `load_products` view
            var categoryId = $(this).val();  // get the selected category ID from the HTML input

            $.ajax({                       // initialize an AJAX request
                url: url,                    // set the url of the request (= localhost:8000/hr/ajax/load-cities/)
                data: {
                    'category': categoryId       // add the country id to the GET parameters
                },
                success: function (data) {   // `data` is the return of the `load_cities` view function
                    $("#id_product").html(data);  // replace the contents of the city input with the data that came from the server
                }
            });
        });
    </script>
{% endblock %}